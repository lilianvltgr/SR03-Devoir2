<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Users</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src=" https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js "></script>
    <link href=" https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css " rel="stylesheet">
    <script> src="../static/JS/script.js" </script>

    <meta charset="UTF-8">
    <title>Authentification Administrateur</title>
</head>
<body>
<H1>Authentification Administrateur</H1>
<form id="myForm" action="/AdminController/isAdmin" onsubmit="return validateAdminAuthForm() " method="POST">

    <label for="email">Email :</label>
    <input type="email" id="email" name="email" required>
    <br>

    <label for="password">Mot de passe :</label>
    <input type="password" id="password" name="password" required>
    <br>
    <button type="submit">Se connecter</button>
</form>
<button onclick="toggleResetPasswordForm()" > Mot de passe oublié </button>
<div id="resetPasswordForm" style="display:none">
    <input type="email" id="resetEmail" name="resetEmail" placeholder="Entrez votre email" required>

    <button type="submit" id="resetPage" onclick="sendResetLink()">Envoyer le lien</button>
</div>
<!--TODO -->
<div th:if="${authFailed}" style="color:red">
    Authentification failed, please try again.
</div>
</body>
<script>
    function toggleResetPasswordForm() {
        var form = document.getElementById('resetPasswordForm');
        form.style.display = (form.style.display === 'none' || form.style.display === '') ? 'block' : 'none';
    }
    document.getElementById('resetPage').addEventListener('click', function() {
        window.location.href = 'http://localhost:8080/AdminController/resetPassword';
    });

    function sendResetLink() {
        var email = document.getElementById('resetEmail').value;

        console.log("mail a été envoyé ", email);
        // window.location.href = 'http://localhost:8080/AdminController/resetPassword'; // URL vers laquelle rediriger pour obtenir le formulaire de réinitialisation

    }
</script>
</html>