<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<link rel="stylesheet" href="http://localhost:63342/chat_admin/src/main/resources/static/CSS/adminHomePage.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@material/mwc-button@latest/dist/mwc-button.css">
<script src="https://cdn.jsdelivr.net/npm/@material/mwc-button@latest/dist/mwc-button.js"></script>
<head>
    <title>Users</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src=" https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js "></script>
    <link href=" https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css " rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script type="importmap">
        {
          "imports": {
            "@material/web/": "https://esm.run/@material/web/"
          }
        }
    </script>
    <script type="module">
        import '@material/web/all.js';
        import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';

        document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
    </script>
    <title></title>
</head>

<body>
<script>
    function deleteUser(ele) {
        const userId = ele.id
        fetch(`http://localhost:8080/AdminController/delete/${userId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
    // document.getElementById('update').addEventListener('click', function() {
    //     window.location.href = 'http://localhost:8080/AdminController/'+ userId; //TODO
    // });
</script>
<div class="container">
    <div class="sidebar">
        <div th:replace="fragments :: sideBar"></div>
    </div>
    <div class="content">
        <div th:each="user : ${users}">
            <span><md-fab label="Supprimer" th:id="${user.getUserId()}" onclick="deleteUser(this)" ></md-fab> </span>
            <span><md-fab label="Modifier" id="update" ></md-fab> </span>

            <span th:text="${user.getLastname()}"></span>
            <span th:text="${user.getFirstname()}"></span>
            <span th:text="${user.getMail()}"></span>
        </div>
    </div>
</div>
</body>
</html>