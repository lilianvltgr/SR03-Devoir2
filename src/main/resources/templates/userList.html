<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<style>
    * {
        box-sizing: border-box;
    }

    #myInput {
        background-image: url('/css/searchicon.png');
        background-position: 10px 12px;
        background-repeat: no-repeat;
        width: 100%;
        font-size: 16px;
        padding: 12px 20px 12px 40px;
        border: 1px solid #ddd;
        margin-bottom: 12px;
    }

    #myUL {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    #myUL li {
        border: 1px solid #ddd;
        margin-top: -1px; /* Prevent double borders */
        background-color: #f6f6f6;
        padding: 12px;
        text-decoration: none;
        font-size: 18px;
        color: black;
        display: block
    }

    #myUL li:hover:not(.header) {
        background-color: #eee;
    }
</style>
<link rel="stylesheet" href="http://localhost:63342/chat_admin/src/main/resources/static/CSS/adminHomePage.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@material/mwc-button@latest/dist/mwc-button.css">
<script src="https://cdn.jsdelivr.net/npm/@material/mwc-button@latest/dist/mwc-button.js"></script>
<head>
    <title>Users</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href=" https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css " rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script> src=" https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js "</script>
<!--    <script> src="../static/JS/searchFunctions.js" </script>-->

    <script type="importmap">
        {
          "imports": {
            "@material/web/": "https://esm.run/@material/web/"
          }
        }
    </script>
    <script type="module">
        import '@material/web/all.js';
        import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';

        document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
    </script>
    <title></title>
</head>

<body>
<script>
    function deleteUser(ele) { //mb fab button
        const userId = ele.getAttribute("userId");
        fetch(`http://localhost:8080/AdminController/delete/${userId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
    function updateUser(ele) {//mb fab button
        const userId = ele.getAttribute("userId");
        window.location.href = `http://localhost:8080/AdminController/userInfos/${userId}`;
    }
</script>
<div class="container">
    <div class="sidebar">
        <div th:replace="fragments :: sideBar"></div>
    </div>
    <div class="content">
        <script>
        function search() {
        // Declare variables
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById('myInput');
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL");
        li = ul.getElementsByTagName('li');

        // Loop through all list items, and hide those who don't match the search query
        for (i = 0; i < li.length; i++) {
        span = li[i].getElementsByTagName("span")[3];
        txtValue = span.textContent || span.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
        li[i].style.display = "";
        } else {
        li[i].style.display = "none";
        }
        }}
        </script>
        <input type="text" id="myInput" onkeyup="search()" placeholder="Search for names.."><br>
        <ul id="myUL" th:each="user : ${users}">
            <li><span><md-fab label="Supprimer" id="delete" th:userId="${user.getUserId()}" onclick="deleteUser(this)" ></md-fab> </span>
            <span><md-fab label="Modifier" id="update" th:userId="${user.getUserId()}" onclick="updateUser(this)" ></md-fab> </span>

            <span th:text="${user.getLastname()}"></span>
            <span th:text="${user.getFirstname()}"></span>
            <span th:text="${user.getMail()}"></span></li>
        </ul>
    </div>
</div>
</body>
</html>